# 原生库大小

本文档展示 Android 和 iOS 平台的原生库大小。

## Android 原生库大小

APK 使用 ZIP deflate 压缩。

| 架构 | 安装大小 | 下载大小 (APK) | 压缩率 |
|------|----------|----------------|--------|
| arm64-v8a | 7.51 MB | 3.20 MB | 42.6% |
| armeabi-v7a | 6.07 MB | 2.82 MB | 46.5% |
| x86_64 | 8.06 MB | 3.37 MB | 41.9% |
| **总计** | **21.64 MB** | **9.39 MB** | **43.4%** |

> **注意：** Android App Bundle (AAB) 只分发设备需要的架构。
> 大多数设备使用 arm64-v8a（下载约 3.20 MB）。

## iOS 原生库大小

App Store 使用类似 LZMA 的压缩（估算值）。

| 架构 | 安装大小 | 下载大小 (IPA) | 压缩率 |
|------|----------|----------------|--------|
| arm64 | 26.59 MB | 7.48 MB | 28.1% |
| arm64 simulator | 27.36 MB | 7.54 MB | 27.6% |
| **总计** | **53.96 MB** | **15.03 MB** | **27.8%** |

> **注意：** App Store 使用 App Thinning，用户只下载 arm64（约 7.5 MB）。
> 模拟器切片不包含在 App Store 构建中。
>
> **重要：** iOS App Store 的蜂窝网络下载限制（200MB）使用的是**安装大小**，而非下载大小。
> arm64 安装大小约 26.59 MB，会计入此限制。

## 对应用的实际影响

### 下载大小影响

用户安装应用时需要额外下载的大小：

| 平台 | 额外下载量 |
|------|------------|
| Android (arm64-v8a) | +3.20 MB |
| iOS (arm64) | +7.48 MB |

### 安装大小影响

用户设备上需要额外占用的存储空间：

| 平台 | 额外存储空间 |
|------|--------------|
| Android (arm64-v8a) | +7.51 MB |
| iOS (arm64) | +26.59 MB |

### 实际考量

1. **应用体积增加**：集成 libvips 会使应用下载大小增加约 3-7 MB，安装大小增加约 7-27 MB（取决于平台）。

2. **用户感知**：用户会在应用商店看到更大的应用体积。请评估图像处理能力是否值得这个体积增加。

3. **存储受限设备**：在存储空间有限的设备上（如 16GB/32GB 手机），额外的 7-27 MB 安装空间可能对部分用户有影响。

4. **下载时间**：在慢速网络（如 3G）下，额外的 3-7 MB 下载可能会增加明显的等待时间。

5. **替代方案**：如果只需要基础图像操作（缩放、裁剪），可考虑使用平台原生 API 或更轻量的库。libvips 最适合需要高级/高性能图像处理的应用。
